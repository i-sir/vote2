<include file="public@header"/>

</head>
<body>
<div class="wrap js-check-wrap">

    <form class="well form-inline margin-top-20 layui-form ajax-form w-form-search" method="get" autocomplete="off">
        活动:
        <div class="form-group">
            <div class="layui-form-item">
                <div class="col-md-6 col-sm-10" style="display: flex;margin-top: 10px;width: 180px;">
                    <select name="activity_id" lay-search>
                        <option value=""
                        <if condition="$activity_id eq '' ">selected</if>
                        >暂不选择</option>

                        <foreach name="activity_list" key="key" item="vo">
                            <option value="{$vo.id}"
                            <if condition="$activity_id eq $vo.id ">selected</if>
                            > {$vo.name}</option>
                        </foreach>

                    </select>
                </div>
            </div>
        </div>


        <button type="submit" class="layui-btn" style="margin-left: 10px">搜索</button>
        <a class="layui-btn layui-bg-red" href="{:url('index',['pid'=>$pid,'params'=>$params])}">清空</a>


        <!--        <a class="layui-btn layui-bg-blue ajax-export" href="javascript:;">导出</a>-->

        <!-- 如有导出需把  筛选条件在这里用input回显,input需隐藏-->
        <input type="hidden" name="is_export" class="is_export" value="0">
        <input type="hidden" name="pid" value="{$pid}">
    </form>

    <!--总统计-->
    <div class="layui-row layui-col-space20">
        <div class="layui-col-xs3">
            <div class="panel panel-default" style="margin-bottom: 0;">
                <div class="panel-body text-center">
                    <i style="font-size: 24px; color: #69C0FF;">{$member_count|default='0'}</i>
                    <div class="margin-top-10">平台用户</div>
                </div>
            </div>
        </div>

        <div class="layui-col-xs3">
            <div class="panel panel-default" style="margin-bottom: 0;">
                <div class="panel-body text-center">
                    <i style="font-size: 24px; color: #69C0FF;">{$activity_count|default='0'}</i>
                    <div class="margin-top-10">活动数量</div>
                </div>
            </div>
        </div>


        <div class="layui-col-xs3">
            <div class="panel panel-default" style="margin-bottom: 0;">
                <div class="panel-body text-center" style="margin-bottom: 0;">
                    <i style="font-size: 24px; color: #5CDBD3;">{$activity_log_count|default='0'}</i>
                    <div class="margin-top-10">报名人数</div>
                </div>
            </div>
        </div>


        <div class="layui-col-xs3">
            <div class="panel panel-default" style="margin-bottom: 0;">
                <div class="panel-body text-center" style="margin-bottom: 0;">
                    <i style="font-size: 24px; color: #507400;">{$activity_vote_count|default='0'}</i>
                    <div class="margin-top-10">投票数</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 第一行饼图：改为 xs4（25%宽度），3个容器总宽 75%，剩余25%留空 -->
    <div class="layui-row">
        <!-- layui-col-xs4 对应 12/4=3列，宽度 25% -->
        <div class="layui-col-xs4" id="proportion_data" style="height: 350px;margin-top: 2%;"></div>
        <div class="layui-col-xs4" id="vip_data" style="height: 350px;margin-top: 2%;"></div>
        <div class="layui-col-xs4" id="track_proportion_data" style="height: 350px;margin-top: 2%;"></div>
    </div>

    <!-- 第二行饼图：保持 xs4（25%宽度），3个容器总宽 75%，与第一行对齐 -->
    <div class="layui-row">
        <div class="layui-col-xs4" id="hobbies_proportion_data" style="height: 350px;margin-top: 2%;"></div>
        <div class="layui-col-xs4" id="emotional_proportion_data" style="height: 350px;margin-top: 2%;"></div>
        <div class="layui-col-xs4" id="label_proportion_data" style="height: 350px;margin-top: 2%;"></div>
    </div>

    <div style="text-align: center;margin-top: 4%;font-size: 25px;">
        用户注册增长
        <!--        <a href="{:url('excel/technician_frequency_export')}" Target="_blank"-->
        <!--           style="color: red; text-decoration: none;cursor: pointer;">用户</a>-->
    </div>
    <div id="user" style="height: 450px;"></div>



    <div style="text-align: center;margin-top: 4%;font-size: 25px;">
        报名数据
        <!--        <a href="{:url('excel/technician_frequency_export')}" Target="_blank"-->
        <!--           style="color: red; text-decoration: none;cursor: pointer;">用户</a>-->
    </div>
    <div id="attend" style="height: 450px;"></div>


    <div style="text-align: center;margin-top: 4%;font-size: 25px;">
        投票数据
        <!--        <a href="{:url('excel/technician_frequency_export')}" Target="_blank"-->
        <!--           style="color: red; text-decoration: none;cursor: pointer;">用户</a>-->
    </div>
    <div id="vote" style="height: 450px;"></div>

</div>
<script src="__STATIC__/js/admin.js"></script>
<script src="__TMPL__/public/assets/simpleboot3/js/adminindex.js"></script>
<script src="__TMPL__/public/assets/js/echarts.js"></script>
<script src="__TMPL__/public/assets/simpleboot3/js/indexnum.js"></script>
<script type="text/javascript" src="https://registry.npmmirror.com/echarts/5.5.1/files/dist/echarts.min.js"></script>
<hook name="admin_before_body_end"/>
<script type="text/javascript">
    //图表
    $(function () {
        //订单数据量趋势
        orderChart([10, 11, 13, 11, 12, 12, 9], [1, 2, 2, 5, 3, 2, 0]);
        //用户数据量趋势
        userChart([820, 932, 901, 934, 1290, 1330, 1320]);
    })
</script>
</body>
</html>

<!--饼图,男女比例-->
<script type="text/javascript">
    var dom = document.getElementById('proportion_data');
    var myChart = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};
    var option;

    var proportion_data = {$proportion_data};

    option = {
        title: {
            text: '男女比例',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        series: [
            {
                type: 'pie',
                radius: '50%',
                data: proportion_data,
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };

    if (option && typeof option === 'object') {
        myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
</script>

<!--饼图,会员比例-->
<script type="text/javascript">
    var dom = document.getElementById('vip_data');
    var myChart = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};
    var option;

    var vip_data = {$age_data};

    option = {
        title: {
            text: '年龄比例',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        series: [
            {
                type: 'pie',
                radius: '50%',
                data: vip_data,
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };

    if (option && typeof option === 'object') {
        myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
</script>

<!--饼图,店铺充值管理费-->
<script type="text/javascript">
    var dom = document.getElementById('shop_data');
    var myChart = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};
    var option;

    var shop_data = {$shop_data};

    option = {
        title: {
            text: '店铺比例',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        series: [
            {
                type: 'pie',
                radius: '50%',
                data: shop_data,
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };

    if (option && typeof option === 'object') {
        myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
</script>

<!-- 新增的四个饼图 -->

<!--饼图,报名赛道比例-->
<script type="text/javascript">
    var dom = document.getElementById('track_proportion_data');
    var myChart = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};
    var option;

    var track_proportion_data = {$track_proportion_data};

    option = {
        title: {
            text: '报名赛道比例',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        series: [
            {
                type: 'pie',
                radius: '50%',
                data: track_proportion_data,
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };

    if (option && typeof option === 'object') {
        myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
</script>

<!--饼图,兴趣爱好比例-->
<script type="text/javascript">
    var dom = document.getElementById('hobbies_proportion_data');
    var myChart = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};
    var option;

    var hobbies_proportion_data = {$hobbies_proportion_data};

    option = {
        title: {
            text: '兴趣爱好比例',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        series: [
            {
                type: 'pie',
                radius: '50%',
                data: hobbies_proportion_data,
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };

    if (option && typeof option === 'object') {
        myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
</script>

<!--饼图,情感状态比例-->
<script type="text/javascript">
    var dom = document.getElementById('emotional_proportion_data');
    var myChart = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};
    var option;

    var emotional_proportion_data = {$emotional_proportion_data};

    option = {
        title: {
            text: '情感状态比例',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        series: [
            {
                type: 'pie',
                radius: '50%',
                data: emotional_proportion_data,
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };

    if (option && typeof option === 'object') {
        myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
</script>

<!--饼图,报名标签比例-->
<script type="text/javascript">
    var dom = document.getElementById('label_proportion_data');
    var myChart = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};
    var option;

    var label_proportion_data = {$label_proportion_data};

    option = {
        title: {
            text: '报名标签比例',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        series: [
            {
                type: 'pie',
                radius: '50%',
                data: label_proportion_data,
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };

    if (option && typeof option === 'object') {
        myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
</script>

<!--柱状图,注册用户-->
<script type="text/javascript">
    var dom = document.getElementById('user');
    var myChart = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};

    var xAxis_data = {$xAxis_data};
    var series_data = {$series_data};

    var option;

    option = {
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: xAxis_data,
        yAxis: [
            {
                type: 'value'
            }
        ],
        series: series_data
    };

    if (option && typeof option === 'object') {
        myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
</script>


<!--柱状图,报名人数-->
<script type="text/javascript">
    var dom = document.getElementById('attend');
    var myChart = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};

    var xAxis_data = {$xAxis2_data};
    var series_data = {$series2_data};

    var option;

    option = {
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: xAxis_data,
        yAxis: [
            {
                type: 'value'
            }
        ],
        series: series_data
    };

    if (option && typeof option === 'object') {
        myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
</script>

<!--柱状图,投票人数-->
<script type="text/javascript">
    var dom = document.getElementById('vote');
    var myChart = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};

    var xAxis_data = {$xAxis3_data};
    var series_data = {$series3_data};

    var option;

    option = {
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: xAxis_data,
        yAxis: [
            {
                type: 'value'
            }
        ],
        series: series_data
    };

    if (option && typeof option === 'object') {
        myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
</script>