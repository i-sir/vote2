<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>
        {:cmf_get_option('set_config')['app_name']!=''?cmf_get_option('set_config')['app_name']:'微巨宝后台管理系统'}</title>
    <link rel="stylesheet" href="__PLUGIN_TMPL__/assets/css/admin_login.css"/>
    <link href="__STATIC__/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <style>
        .login-form .form-group {
            margin: 20px 0;
        }

        .page-login-v3:before {
            background: url({$config.b_bg} ? ../../upload/{$config.b_bg} : '') center center / cover no-repeat !important;
        }
    </style>
</head>
<body class="page-login-v3">
<div class="container">

    <div id="wrapper" class="login-body">


        <div class="swep-left">
            <div class="swiper-slide">
                <if condition="$config.b_bg_illus">
                    <img src="../../upload/{$config.b_bg_illus}">
                    <else/>
                    <img src="__PLUGIN_TMPL__/assets/images/b_bg_illus.png">
                </if>
            </div>
        </div>
        <div class="login-content" id="login">
            <h2 class="brand-text">
                {:cmf_get_option('set_config')['app_name']!=''?cmf_get_option('set_config')['app_name']:'微巨宝后台管理系统'}</h2>
            <form id="login-form" class="login-form">
                <div class="form-group">
                    <i class="fa fa-user"></i>
                    <input name="username" placeholder="请输入用户名" type="text" required>
                </div>
                <div class="form-group">
                    <i class="fa fa-lock"></i>
                    <input name="password" placeholder="请输入密码" type="password" required>
                </div>
                <!--<div class="form-group">
                    <i class="fa fa-shield"></i>
                    <input name="captcha" placeholder="请输入验证码" type="text" required style="width: 50%;float: left;margin-right:10px">
                    <captcha height="40" width="160px" font-size="18" style="cursor: pointer;" />
                </div>-->
                <div class="form-group" style="margin-bottom:-21px;">
                    <button id="login-submit" type="submit">登录</button>

                </div>

            </form>

<!--            <div id="domain_name">-->
<!--                <a href="{:cmf_get_asset_url(cmf_config('domain_name'))}/plugin/admin_journal/admin_index/index.html"-->
<!--                   target="_blank">日志</a>-->
<!--                <a href="{:cmf_get_asset_url(cmf_config('domain_name'))}" target="_blank">线上</a>-->
<!--            </div>-->


        </div>
    </div>
</div>


<div class="copyright">{:cmf_config('copyright')}</div>
</body>
<script src="__PLUGIN_TMPL__/assets/js/jquery.js"></script>
<script src="__PLUGIN_TMPL__/assets/js/layer/layer.js"></script>
<script src="__PLUGIN_TMPL__/assets/js/jquery.form.min.js"></script>

<style>
    #domain_name {
        font-size: 22px;
        margin-left: 78px;
        width: 170px;
    }
</style>
<script>
    //检测是否显示线上文字   domain_name
    function is_https() {
        return 'https:' == location.protocol ? true : false;
    }

    var http_value = is_https();
    $('#domain_name').show();
    if (http_value) {
        $('#domain_name').hide();
    }



    // 表单提交
    var $form = $('#login-form');
    $form.submit(function () {
        var $btn_submit = $('#login-submit');
        $form.ajaxSubmit({
            type: "post",
            dataType: "json",
            url: "{:url('public/doLogin')}",
            success: function (result) {
                $btn_submit.attr('disabled', false);
                if (result.code === 1) {
                    layer.msg(result.msg, {
                        time: 1500,
                        anim: 1,
                        icon: 1
                    }, function () {
                        window.location = result.url;
                    });
                    return true;
                } else {
                    $('.verify_img').trigger('click')
                }
                layer.msg(result.msg, {
                    time: 1500,
                    anim: 6
                });
            }
        });
        return false;
    });
</script>
</html>
